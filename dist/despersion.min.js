/*! despersion 06-08-2014 */
!function(a){a.fn.despersion=function(b){$eles=null;for(var c=a.fn.despersion.def||{width:360,height:360,verNum:9,horNum:9,img:"url('../static/image/test.jpg')"},d=a.extend({},c,b),e=d.width,f=d.height,g=d.verNum,h=d.horNum,i=d.img,j=e/g,k=f/h,l=a("<div>Ctrl+b</div>").css({position:"relative",width:e,height:f,margin:"0 auto","text-align":"center",opacity:1}),m=0;g>m;m++)for(var n=0;h>n;n++)a("<div></div>").css({position:"absolute",width:j,height:k,backgroundImage:i,backgroundSize:e+"px "+f+"px",backgroundPosition:-j*n+"px "+-k*m+"px",top:m*k+"px",left:n*j+"px",opacity:1}).appendTo(l);return $eles=l.children(),this.each(function(){l.on("click",function(){d()});var b=a(this),c=function(){for(var b=0;g>b;b++)for(var c=0;h>c;c++)a($eles[b*h+c]).animate({top:b*k+"px",left:c*j+"px",opacity:1},1e3)},d=function(){for(var b=0;g>b;b++)for(var c=0;h>c;c++){var d=[];d.push({top:-(1e3*Math.random()|0)+"px",left:-(1e3*Math.random()|0)+"px"}),d.push({top:(1e3*Math.random()|0)+"px",left:-(1e3*Math.random()|0)+"px"}),d.push({top:-(1e3*Math.random()|0)+"px",left:(1e3*Math.random()|0)+"px"}),d.push({top:(1e3*Math.random()|0)+"px",left:(1e3*Math.random()|0)+"px"}),a($eles[b*h+c]).animate({top:d[(b*h+c)%4].top,left:d[(b*h+c)%4].left,opacity:0},50*(b*h+c))}};b.replaceWith(l),a(document).on("keypress",function(a){2==a.which&&a.ctrlKey&&c()})})}}(jQuery);